<template>
  <div class="dialog animated fadeIn window" id="window">
    <div class="bigItem">
        <el-button class="dialog-close" type="text" @click="hidden()"><i class="el-icon-close" @click="hidden()"></i></el-button>
        <div class="user">
            <img v-bind:src="item.userImage"/>
            <div class="username">
                <h4>{{item.username}}</h4>
                <span>{{item.usersign}}</span>
            </div>
        </div>
        <div class="content-box">
            <div class="content">
                <div class="imgBox">
                    <img class="img" v-for="item in item.imageUrl" v-bind:src="item" v-bind:key="item" @click="bigImage(item)"/>
                </div>      
                <pre v-html="item.content"></pre>
            </div>
            <div class="actions">
                <div class="good" @click="good()">
                    <svg class="items-icon" aria-hidden="true" @click="good()" v-if="item.good === 0">
                        <use xlink:href="#icon-dianzan2"></use>
                    </svg>
                    <svg class="red-icon" aria-hidden="true" @click="good()" v-else="item.good === 1">
                        <use xlink:href="#icon-dianzan2"></use>
                    </svg>
                    <span class="number">{{item.good}}</span>
                </div>
                <div class="comment-icon">
                    <svg class="items-icon" aria-hidden="true">
                        <use xlink:href="#icon-pinglun"></use>
                    </svg>
                    <span class="comment-number">{{item.commentNumber}} Êù°ËØÑËÆ∫</span>
                </div>
            </div>
            <div class="comment-box">
                <div class="comment" v-for="comment in item.comment">
                    <img v-bind:src="comment.userImage"/>
                    <span class="comment-username">{{comment.username}}</span>
                    <span>Ôºö</span>
                    <p v-html="comment.comment"></p>
                </div>

            </div>
        </div>
        
        <div class="comment-form">
            <el-input
            type="textarea"
            :rows="2"
            placeholder="ËØ¥ÁÇπ‰ªÄ‰πàÔºü"
            resize="none"
            v-model="comment">
            </el-input>
            <el-button type="primary" class="upComment" @click="addComment()">ÂèëË°®</el-button>
            <svg class="emoji-icon" aria-hidden="true" @click="emojishow = !emojishow">
                <use xlink:href="#icon-emoji"></use>
            </svg>
            <div class="emojiBox" v-show="emojishow">
                <div class="emoji">
                        <img class="emojione" alt="üòÄ" title=":grinning:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f600.png">
                        <img class="emojione" alt="üòÉ" title=":smiley:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f603.png">
                        <img class="emojione" alt="üòÑ" title=":smile:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f604.png">
                        <img class="emojione" alt="üòÅ" title=":grin:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f601.png">
                        <img class="emojione" alt="üòÜ" title=":laughing:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f606.png"><img class="emojione" alt="üòÖ" title=":sweat_smile:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f605.png"><img class="emojione" alt="üòÇ" title=":joy:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f602.png"><img class="emojione" alt="ü§£" title=":rofl:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f923.png"><img class="emojione" alt="üòä" title=":blush:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f60a.png"><img class="emojione" alt="üòá" title=":innocent:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f607.png"><img class="emojione" alt="üôÇ" title=":slight_smile:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f642.png"><img class="emojione" alt="üôÉ" title=":upside_down:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f643.png"><img class="emojione" alt="üòâ" title=":wink:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f609.png"><img class="emojione" alt="üòå" title=":relieved:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f60c.png"><img class="emojione" alt="üòç" title=":heart_eyes:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f60d.png"><img class="emojione" alt="üòò" title=":kissing_heart:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f618.png"><img class="emojione" alt="üòó" title=":kissing:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f617.png"><img class="emojione" alt="üòô" title=":kissing_smiling_eyes:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f619.png"><img class="emojione" alt="üòö" title=":kissing_closed_eyes:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f61a.png"><img class="emojione" alt="üòã" title=":yum:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f60b.png"><img class="emojione" alt="üòú" title=":stuck_out_tongue_winking_eye:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f61c.png"><img class="emojione" alt="üòù" title=":stuck_out_tongue_closed_eyes:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f61d.png"><img class="emojione" alt="üòõ" title=":stuck_out_tongue:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f61b.png"><img class="emojione" alt="ü§ë" title=":money_mouth:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f911.png"><img class="emojione" alt="ü§ó" title=":hugging:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f917.png"><img class="emojione" alt="ü§ì" title=":nerd:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f913.png"><img class="emojione" alt="üòé" title=":sunglasses:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f60e.png"><img class="emojione" alt="ü§°" title=":clown:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f921.png"><img class="emojione" alt="ü§†" title=":cowboy:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f920.png"> <img class="emojione" alt="üòè" title=":smirk:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f60f.png"><img class="emojione" alt="üòí" title=":unamused:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f612.png"><img class="emojione" alt="üòû" title=":disappointed:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f61e.png"><img class="emojione" alt="üòî" title=":pensive:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f614.png"><img class="emojione" alt="üòü" title=":worried:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f61f.png"><img class="emojione" alt="üòï" title=":confused:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f615.png"><img class="emojione" alt="üôÅ" title=":slight_frown:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f641.png"><img class="emojione" alt="üò£" title=":persevere:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f623.png"><img class="emojione" alt="üòñ" title=":confounded:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f616.png"><img class="emojione" alt="üò´" title=":tired_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f62b.png"><img class="emojione" alt="üò©" title=":weary:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f629.png"><img class="emojione" alt="üò§" title=":triumph:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f624.png"><img class="emojione" alt="üò†" title=":angry:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f620.png"><img class="emojione" alt="üò°" title=":rage:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f621.png"><img class="emojione" alt="üò∂" title=":no_mouth:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f636.png"><img class="emojione" alt="üòê" title=":neutral_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f610.png"><img class="emojione" alt="üòë" title=":expressionless:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f611.png"><img class="emojione" alt="üòØ" title=":hushed:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f62f.png"><img class="emojione" alt="üò¶" title=":frowning:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f626.png"><img class="emojione" alt="üòß" title=":anguished:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f627.png"><img class="emojione" alt="üòÆ" title=":open_mouth:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f62e.png"><img class="emojione" alt="üò≤" title=":astonished:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f632.png"><img class="emojione" alt="üòµ" title=":dizzy_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f635.png"><img class="emojione" alt="üò≥" title=":flushed:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f633.png"><img class="emojione" alt="üò±" title=":scream:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f631.png"><img class="emojione" alt="üò®" title=":fearful:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f628.png"><img class="emojione" alt="üò∞" title=":cold_sweat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f630.png"><img class="emojione" alt="üò¢" title=":cry:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f622.png"><img class="emojione" alt="üò•" title=":disappointed_relieved:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f625.png"> <img class="emojione" alt="ü§§" title=":drooling_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f924.png"><img class="emojione" alt="üò≠" title=":sob:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f62d.png"><img class="emojione" alt="üòì" title=":sweat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f613.png"><img class="emojione" alt="üò™" title=":sleepy:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f62a.png"><img class="emojione" alt="üò¥" title=":sleeping:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f634.png"><img class="emojione" alt="üôÑ" title=":rolling_eyes:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f644.png"><img class="emojione" alt="ü§î" title=":thinking:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f914.png"><img class="emojione" alt="ü§•" title=":lying_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f925.png"><img class="emojione" alt="üò¨" title=":grimacing:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f62c.png"><img class="emojione" alt="ü§ê" title=":zipper_mouth:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f910.png"><img class="emojione" alt="ü§¢" title=":nauseated_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f922.png"><img class="emojione" alt="ü§ß" title=":sneezing_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f927.png"><img class="emojione" alt="üò∑" title=":mask:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f637.png"><img class="emojione" alt="ü§í" title=":thermometer_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f912.png"><img class="emojione" alt="ü§ï" title=":head_bandage:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f915.png"><img class="emojione" alt="üòà" title=":smiling_imp:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f608.png"><img class="emojione" alt="üëø" title=":imp:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f47f.png"><img class="emojione" alt="üëπ" title=":japanese_ogre:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f479.png"><img class="emojione" alt="üë∫" title=":japanese_goblin:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f47a.png"><img class="emojione" alt="üí©" title=":poop:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f4a9.png"><img class="emojione" alt="üëª" title=":ghost:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f47b.png"><img class="emojione" alt="üíÄ" title=":skull:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f480.png">‚ò†<img class="emojione" alt="üëΩ" title=":alien:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f47d.png"><img class="emojione" alt="üëæ" title=":space_invader:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f47e.png"><img class="emojione" alt="ü§ñ" title=":robot:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f916.png"><img class="emojione" alt="üéÉ" title=":jack_o_lantern:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f383.png"><img class="emojione" alt="üò∫" title=":smiley_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f63a.png"><img class="emojione" alt="üò∏" title=":smile_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f638.png"><img class="emojione" alt="üòπ" title=":joy_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f639.png"> <img class="emojione" alt="üòª" title=":heart_eyes_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f63b.png"><img class="emojione" alt="üòº" title=":smirk_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f63c.png"><img class="emojione" alt="üòΩ" title=":kissing_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f63d.png"><img class="emojione" alt="üôÄ" title=":scream_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f640.png"><img class="emojione" alt="üòø" title=":crying_cat_face:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f63f.png"><img class="emojione" alt="üòæ" title=":pouting_cat:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f63e.png"><img class="emojione" alt="üëê" title=":open_hands:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f450.png"><img class="emojione" alt="üôå" title=":raised_hands:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f64c.png"><img class="emojione" alt="üëè" title=":clap:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f44f.png"><img class="emojione" alt="üôè" title=":pray:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f64f.png"><img class="emojione" alt="ü§ù" title=":handshake:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f91d.png"><img class="emojione" alt="üëç" title=":thumbsup:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f44d.png"><img class="emojione" alt="üëé" title=":thumbsdown:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f44e.png"><img class="emojione" alt="üëä" title=":punch:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f44a.png"><img class="emojione" alt="‚úä" title=":fist:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/270a.png"><img class="emojione" alt="ü§õ" title=":left_facing_fist:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f91b.png"><img class="emojione" alt="ü§ú" title=":right_facing_fist:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f91c.png"><img class="emojione" alt="ü§û" title=":fingers_crossed:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f91e.png"><img class="emojione" alt="ü§ò" title=":metal:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f918.png"><img class="emojione" alt="üëå" title=":ok_hand:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f44c.png"><img class="emojione" alt="üëà" title=":point_left:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f448.png"><img class="emojione" alt="üëâ" title=":point_right:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f449.png"><img class="emojione" alt="üëÜ" title=":point_up_2:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f446.png"><img class="emojione" alt="üëá" title=":point_down:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f447.png"><img class="emojione" alt="‚úã" title=":raised_hand:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/270b.png"><img class="emojione" alt="ü§ö" title=":raised_back_of_hand:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f91a.png"><img class="emojione" alt="üññ" title=":vulcan:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f596.png"> <img class="emojione" alt="üëã" title=":wave:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f44b.png"><img class="emojione" alt="ü§ô" title=":call_me:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f919.png"><img class="emojione" alt="üí™" title=":muscle:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f4aa.png"><img class="emojione" alt="üñï" title=":middle_finger:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f595.png">
                </div>
            </div>
            
        </div>
    </div>
  </div>
</template>

<script>
export default {
    data(){
        return{
            comment:'',
            emojishow:false,
        }
    },
    props:['item','user','what'],
    mounted() {
        
        this.transform()
        this.addEmoji()
    },
    methods:{
        bigImage:function(item){
            if(this.what === 'ManData'){
                $(`    <div id="wrapper">
                    <div id="imgBox">
                        <img src="${item}" alt="" id="img">
                        </div>
                    </div>`).appendTo(".Lost")
                let box = $('#imgBox')[0]
                let img = $('#img')[0]
                let wrapper = $('#wrapper')
                box.addEventListener('mousemove',function(e){
                let width = box.getBoundingClientRect().width

                let height = box.getBoundingClientRect().height

                
                let Xcenter = box.offsetLeft + width /2
                let Ycenter = box.offsetTop + height /2
                let mouseX = e.clientX - Xcenter
                let mouseY = e.clientY - Ycenter
                


                let Xpercent = mouseX / width/2
                let Ypercent = mouseY / height/2
                
                let xDeg = Xpercent * 50
                let yDeg = Ypercent * 50
                img.style.transform = `translateZ(-100px) rotateX(${-yDeg}deg) rotateY(${xDeg}deg)`  

                })
                wrapper.bind('click',function(){
                    wrapper.remove()
                })
            }else if(this.what === 'WomanData'){
                                $(`    <div id="wrapper">
                    <div id="imgBox">
                        <img src="${item}" alt="" id="img">
                        </div>
                    </div>`).appendTo(".Notice")
                let box = $('#imgBox')[0]
                let img = $('#img')[0]
                let wrapper = $('#wrapper')
                box.addEventListener('mousemove',function(e){
                let width = box.getBoundingClientRect().width

                let height = box.getBoundingClientRect().height

                
                let Xcenter = box.offsetLeft + width /2
                let Ycenter = box.offsetTop + height /2
                let mouseX = e.clientX - Xcenter
                let mouseY = e.clientY - Ycenter
                


                let Xpercent = mouseX / width/2
                let Ypercent = mouseY / height/2
                
                let xDeg = Xpercent * 50
                let yDeg = Ypercent * 50
                img.style.transform = `translateZ(-100px) rotateX(${-yDeg}deg) rotateY(${xDeg}deg)`  

                })
                wrapper.bind('click',function(){
                    wrapper.remove()
                })
            }else{
                console.log('ss')
                    $(`    <div id="wrapper">
                    <div id="imgBox">
                        <img src="${item}" alt="" id="img">
                        </div>
                    </div>`).appendTo(".Confession")
                let box = $('#imgBox')[0]
                let img = $('#img')[0]
                let wrapper = $('#wrapper')
                box.addEventListener('mousemove',function(e){
                let width = box.getBoundingClientRect().width

                let height = box.getBoundingClientRect().height

                
                let Xcenter = box.offsetLeft + width /2
                let Ycenter = box.offsetTop + height /2
                let mouseX = e.clientX - Xcenter
                let mouseY = e.clientY - Ycenter
                


                let Xpercent = mouseX / width/2
                let Ypercent = mouseY / height/2
                
                let xDeg = Xpercent * 50
                let yDeg = Ypercent * 50
                img.style.transform = `translateZ(-100px) rotateX(${-yDeg}deg) rotateY(${xDeg}deg)`  

                })
                wrapper.bind('click',function(){
                    wrapper.remove()
                })
            }
            
        },
        addEmoji:function(){
            $('.emoji').children().click((emoji)=> {
                this.comment = this.comment + emoji.target.alt
                this.emojishow = false
            })
        },
        addComment:function(){
            if(this.what === 'ManData'){
                this.comment = emojione.toImage(this.comment)
                this.item.comment.push(
                    {
                        username: `${this.user.username}`,
                        gender: `${this.user.gender}`,
                        userSign: `${this.user.userSign}`,
                        realName: `${this.user.realName}`,
                        major: `${this.user.major}`,
                        userImage: `${this.user.userImage}`,
                        comment: `${this.comment}`
                    }
                )
                // Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ classNameÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØ objectId
                var ManData = AV.Object.createWithoutData('ManData', this.item.id);
                // ‰øÆÊîπÂ±ûÊÄß
                ManData.set('comment', this.item.comment);
                // ‰øùÂ≠òÂà∞‰∫ëÁ´Ø
                ManData.save();
                this.comment = ''
            }else if(this.what === 'WomanData'){
                this.comment = emojione.toImage(this.comment)
                this.item.comment.push(
                    {
                        username: `${this.user.username}`,
                        gender: `${this.user.gender}`,
                        userSign: `${this.user.userSign}`,
                        realName: `${this.user.realName}`,
                        major: `${this.user.major}`,
                        userImage: `${this.user.userImage}`,
                        comment: `${this.comment}`
                    }
                )
                // Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ classNameÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØ objectId
                var WomanData = AV.Object.createWithoutData('WomanData', this.item.id);
                // ‰øÆÊîπÂ±ûÊÄß
                WomanData.set('comment', this.item.comment);
                // ‰øùÂ≠òÂà∞‰∫ëÁ´Ø
                WomanData.save();
                this.comment = '' 
            }else{
                this.comment = emojione.toImage(this.comment)
                this.item.comment.push(
                    {
                        username: `${this.user.username}`,
                        gender: `${this.user.gender}`,
                        userSign: `${this.user.userSign}`,
                        realName: `${this.user.realName}`,
                        major: `${this.user.major}`,
                        userImage: `${this.user.userImage}`,
                        comment: `${this.comment}`
                    }
                )
                // Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ classNameÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØ objectId
                var ConfessionData = AV.Object.createWithoutData('ConfessionData', this.item.id);
                // ‰øÆÊîπÂ±ûÊÄß
                ConfessionData.set('comment', this.item.comment);
                // ‰øùÂ≠òÂà∞‰∫ëÁ´Ø
                ConfessionData.save();
                this.comment = '' 
            }
           
        },
        good:function(){
            for(let i = 0;i<=this.item.goodUser.length;i++){
                if(this.item.goodUser[i] === this.user.username){
                    return
                }          
            }
            
            this.item.goodUser.push(this.user.username)
            var ConfessionData = AV.Object.createWithoutData('ConfessionData', this.item.id);
            // ‰øÆÊîπÂ±ûÊÄß
            ConfessionData.set('good', this.item.good);
            ConfessionData.set('goodUser', this.item.goodUser);
            // ‰øùÂ≠òÂà∞‰∫ëÁ´Ø
            ConfessionData.save();
        },
        handleComment:function(){
            for(let i = 0;i<item.comment.length;i ++){
                item.comment[i].comment = emojione.toImage(item.comment[i].comment)
                document.getElementById('outputText').innerHTML = item.comment[i].comment;
            }
        },
        transform:function(){
            $(document).ready(function() {
                $(".convert-emoji").each(function() {
                    var original = $(this).html();
                    // use .shortnameToImage if only converting shortnames (for slightly better performance)
                    var converted = emojione.toImage(original);
                    $(this).html(converted);
                });
            });
        },
        good:function(){
            for(let i = 0;i<=this.item.goodUser.length;i++){
                if(this.item.goodUser[i] === this.user.username){
                    return
                }          
            }
            this.item.good = 1
            this.item.goodUser.push(this.user.username)
            var ConfessionData = AV.Object.createWithoutData('ConfessionData', this.item.id);
            // ‰øÆÊîπÂ±ûÊÄß
            ConfessionData.set('good', this.item.good);
            ConfessionData.set('goodUser', this.item.goodUser);
            // ‰øùÂ≠òÂà∞‰∫ëÁ´Ø
            ConfessionData.save();
            
        },
        hidden:function(){
            console.log('sss')
            $('.window').css('display','none')
        }
    }
}
</script>

<style>

</style>
